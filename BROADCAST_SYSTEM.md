# ุณุณุชู ุงุฑุณุงู ูพุงู ููฺฏุงู (Broadcast System)

## ๐ข ูฺฺฏโูุง ุณุณุชู

ุณุณุชู ุงุฑุณุงู ูพุงู ููฺฏุงู ุจู ุงุฏููโูุง ุงู ุงูฺฉุงู ุฑุง ูโุฏูุฏ ฺฉู ูพุงูโูุง ุฑุง ุจู ุชูุงู ฺฉุงุฑุจุฑุงู ูุนุงู ุฑุจุงุช ุงุฑุณุงู ฺฉููุฏ. ุงู ุณุณุชู ุดุงูู ูฺฺฏโูุง ุฒุฑ ุงุณุช:

### โ ูพุดุชุจุงู ุงุฒ ุงููุงุน ูุญุชูุง
- **ูุชู ุณุงุฏู**: ุงุฑุณุงู ูพุงู ูุชู ุจุฏูู ูุงู
- **ุนฺฉุณ + ฺฉูพุดู**: ุงุฑุณุงู ุนฺฉุณ ุจุง ูุชู ุงุฎุชุงุฑ
- **ูุฏู + ฺฉูพุดู**: ุงุฑุณุงู ูุฏู ุจุง ูุชู ุงุฎุชุงุฑ
- **ูุงู + ฺฉูพุดู**: ุงุฑุณุงู ูุงู ุจุง ูุชู ุงุฎุชุงุฑ
- **ูุงู ุตูุช + ฺฉูพุดู**: ุงุฑุณุงู ูุงู ุตูุช ุจุง ูุชู ุงุฎุชุงุฑ
- **ูพุงู ุตูุช**: ุงุฑุณุงู ูพุงู ุตูุช (ูุณ)
- **ุงุณุชฺฉุฑ**: ุงุฑุณุงู ุงุณุชฺฉุฑ
- **ุงููุดู + ฺฉูพุดู**: ุงุฑุณุงู ุงููุดู (GIF) ุจุง ูุชู ุงุฎุชุงุฑ

### ๐ ุณุณุชู ุชุฃุฏ
- **ูพุดโููุงุด**: ููุงุด ูพุดโููุงุด ูพุงู ูุจู ุงุฒ ุงุฑุณุงู
- **ุชุฃุฏ ุงุฏูู**: ูุงุฒ ุจู ุชุฃุฏ ุงุฏูู ูุจู ุงุฒ ุงุฑุณุงู
- **ุขูุงุฑ ฺฉุงุฑุจุฑุงู**: ููุงุด ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ูุฏู

### ๐ ูุฏุฑุช ู ุฑุฏุงุจ
- **ุชุงุฑุฎฺู ูพุงูโูุง**: ูุดุงูุฏู ุชูุงู ูพุงูโูุง ุงุฑุณุงู ุดุฏู
- **ุขูุงุฑ ุงุฑุณุงู**: ุชุนุฏุงุฏ ุงุฑุณุงู ูููู ู ูุงูููู
- **ูุถุนุช ูพุงู**: ุฑุฏุงุจ ูุถุนุช ูุฑ ูพุงู (ุฏุฑ ุงูุชุธุงุฑุ ุงุฑุณุงู ุดุฏูุ ูุงูููู)

## ๐๏ธ ูุนูุงุฑ ุณุณุชู

### ูุฏูโูุง ุฏุงุฏู

#### BroadcastMessage
```go
type BroadcastMessage struct {
    ID          uint           `gorm:"primarykey"`
    AdminID     int64          `gorm:"not null"`     // ID ุงุฏูู ุงุฑุณุงู ฺฉููุฏู
    ContentType string         `gorm:"not null"`     // ููุน ูุญุชูุง
    Text        string         `json:"text"`         // ูุชู ุง ฺฉูพุดู
    FileID      string         `json:"file_id"`      // File ID ุชูฺฏุฑุงู
    FileURL     string         `json:"file_url"`     // URL ูุงู ูุญู
    Status      string         `gorm:"default:'pending'"` // ูุถุนุช
    SentCount   int            `gorm:"default:0"`    // ุชุนุฏุงุฏ ุงุฑุณุงู ูููู
    FailedCount int            `gorm:"default:0"`    // ุชุนุฏุงุฏ ุงุฑุณุงู ูุงูููู
    CreatedAt   time.Time
    UpdatedAt   time.Time
    DeletedAt   gorm.DeletedAt `gorm:"index"`
}
```

#### BroadcastDelivery
```go
type BroadcastDelivery struct {
    ID           uint           `gorm:"primarykey"`
    BroadcastID  uint           `gorm:"not null"`
    UserID       int64          `gorm:"not null"`    // ID ฺฉุงุฑุจุฑ
    Status       string         `gorm:"not null"`    // ูุถุนุช ุงุฑุณุงู
    ErrorMessage string         `json:"error_message"`
    CreatedAt    time.Time
    UpdatedAt    time.Time
    DeletedAt    gorm.DeletedAt `gorm:"index"`
}
```

### ุณุฑูุณโูุง

#### BroadcastService
- `CreateBroadcast()`: ุงุฌุงุฏ ูพุงู ููฺฏุงู ุฌุฏุฏ
- `SendBroadcast()`: ุงุฑุณุงู ูพุงู ุจู ุชูุงู ฺฉุงุฑุจุฑุงู
- `GetBroadcastHistory()`: ุฏุฑุงูุช ุชุงุฑุฎฺู ูพุงูโูุง
- `GetBroadcastStats()`: ุฏุฑุงูุช ุขูุงุฑ ูพุงู
- `GetUserCount()`: ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ูุนุงู

### Handler ูุง

#### AdminHandler
- `sendBroadcastMainMenu()`: ููุงุด ููู ุงุตู
- `startBroadcastText()`: ุดุฑูุน ุงุฑุณุงู ูุชู
- `startBroadcastPhoto()`: ุดุฑูุน ุงุฑุณุงู ุนฺฉุณ
- `startBroadcastVideo()`: ุดุฑูุน ุงุฑุณุงู ูุฏู
- `handleBroadcastContent()`: ูพุฑุฏุงุฒุด ูุญุชูุง ุงุฑุณุงู
- `showBroadcastPreview()`: ููุงุด ูพุดโููุงุด
- `confirmBroadcast()`: ุชุฃุฏ ู ุงุฑุณุงู
- `cancelBroadcast()`: ูุบู ุงุฑุณุงู

## ๐ ูุญูู ุงุณุชูุงุฏู

### 1. ุฏุณุชุฑุณ ุจู ุณุณุชู
- ุงุฏูู ุฏุณุชูุฑ `/start` ุฑุง ุงุฑุณุงู ูโฺฉูุฏ
- ุงุฒ ููู ุงุตู ฺฏุฒูู "๐ข ุงุฑุณุงู ูพุงู ููฺฏุงู" ุฑุง ุงูุชุฎุงุจ ูโฺฉูุฏ

### 2. ุงูุชุฎุงุจ ููุน ูุญุชูุง
- **๐ ุงุฑุณุงู ูุชู**: ุจุฑุง ูพุงูโูุง ูุชู ุณุงุฏู
- **๐ท ุงุฑุณุงู ุนฺฉุณ**: ุจุฑุง ุนฺฉุณ ุจุง ฺฉูพุดู ุงุฎุชุงุฑ
- **๐ฅ ุงุฑุณุงู ูุฏู**: ุจุฑุง ูุฏู ุจุง ฺฉูพุดู ุงุฎุชุงุฑ
- **๐ ุงุฑุณุงู ูุงู**: ุจุฑุง ูุงู ุจุง ฺฉูพุดู ุงุฎุชุงุฑ
- **๐ต ุงุฑุณุงู ุตุฏุง**: ุจุฑุง ูุงู ุตูุช ุจุง ฺฉูพุดู ุงุฎุชุงุฑ
- **๐ค ุงุฑุณุงู ูุณ**: ุจุฑุง ูพุงู ุตูุช
- **๐ ุงุฑุณุงู ุงุณุชฺฉุฑ**: ุจุฑุง ุงุณุชฺฉุฑ
- **๐ฌ ุงุฑุณุงู ุงููุดู**: ุจุฑุง ุงููุดู ุจุง ฺฉูพุดู ุงุฎุชุงุฑ

### 3. ุงุฑุณุงู ูุญุชูุง
- ูุญุชูุง ููุฑุฏ ูุธุฑ ุฑุง ุงุฑุณุงู ฺฉูุฏ
- ุจุฑุง ุงููุงุน ูุญุชูุง ฺฉู ฺฉูพุดู ูพุดุชุจุงู ูโฺฉููุฏุ ฺฉูพุดู ุฑุง ูุงุฑุฏ ฺฉูุฏ (ุงุฎุชุงุฑ)

### 4. ุชุฃุฏ ู ุงุฑุณุงู
- ูพุดโููุงุด ูพุงู ููุงุด ุฏุงุฏู ูโุดูุฏ
- ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ูุฏู ููุงุด ุฏุงุฏู ูโุดูุฏ
- ุฏฺฉูู "โ ุชุฃุฏ ู ุงุฑุณุงู" ุฑุง ฺฉูฺฉ ฺฉูุฏ
- ุง "โ ูุบู" ุฑุง ุจุฑุง ูุบู ุนููุงุช

### 5. ูุดุงูุฏู ุขูุงุฑ
- ูพุณ ุงุฒ ุงุฑุณุงูุ ุขูุงุฑ ุงุฑุณุงู ูููู ู ูุงูููู ููุงุด ุฏุงุฏู ูโุดูุฏ
- ุงุฒ ฺฏุฒูู "๐ ุชุงุฑุฎฺู ูพุงูโูุง" ูโุชูุงูุฏ ุชุงุฑุฎฺู ุฑุง ูุดุงูุฏู ฺฉูุฏ

## โ๏ธ ุชูุธูุงุช ู ูพฺฉุฑุจูุฏ

### ูุญุฏูุฏุชโูุง ุงุฑุณุงู
- **Concurrent Limit**: ุญุฏุงฺฉุซุฑ 10 ุงุฑุณุงู ููุฒูุงู
- **Rate Limiting**: ูุญุฏูุฏุช ุณุฑุนุช ุงุฑุณุงู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุญุฏูุฏุช ุชูฺฏุฑุงู

### ูุฏุฑุช ุฎุทุง
- **Retry Mechanism**: ุชูุงุด ูุฌุฏุฏ ุจุฑุง ุงุฑุณุงู ูุงูููู
- **Error Logging**: ุซุจุช ุฎุทุงูุง ุงุฑุณุงู
- **Status Tracking**: ุฑุฏุงุจ ูุถุนุช ูุฑ ุงุฑุณุงู

## ๐ง ุชูุณุนู ู ุณูุงุฑุดโุณุงุฒ

### ุงุถุงูู ฺฉุฑุฏู ููุน ูุญุชูุง ุฌุฏุฏ
1. ููุน ูุญุชูุง ุฑุง ุจู `BroadcastPreview` ุงุถุงูู ฺฉูุฏ
2. ูุชุฏ ุงุฑุณุงู ูุฑุจูุทู ุฑุง ุฏุฑ `BroadcastService` ูพุงุฏูโุณุงุฒ ฺฉูุฏ
3. handler ูุฑุจูุทู ุฑุง ุฏุฑ `AdminHandler` ุงุถุงูู ฺฉูุฏ
4. keyboard ูุฑุจูุทู ุฑุง ุฏุฑ `keyboards.go` ุงุถุงูู ฺฉูุฏ

### ุจูุจูุฏ ุนููฺฉุฑุฏ
- **Batch Processing**: ูพุฑุฏุงุฒุด ุฏุณุชูโุง ุจุฑุง ูพุงูโูุง ุฒุงุฏ
- **Queue System**: ุณุณุชู ุตู ุจุฑุง ูุฏุฑุช ุจูุชุฑ
- **Caching**: ฺฉุด ฺฉุฑุฏู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑุงู

## ๐ ูุซุงูโูุง ุงุณุชูุงุฏู

### ุงุฑุณุงู ูุชู ุณุงุฏู
```
1. ุงุฏูู: /start
2. ุงูุชุฎุงุจ: ๐ข ุงุฑุณุงู ูพุงู ููฺฏุงู
3. ุงูุชุฎุงุจ: ๐ ุงุฑุณุงู ูุชู
4. ุงุฑุณุงู: "ุณูุงู ฺฉุงุฑุจุฑุงู ุนุฒุฒ! ูพุงู ุฌุฏุฏ ุฏุงุฑู..."
5. ุชุฃุฏ: โ ุชุฃุฏ ู ุงุฑุณุงู
```

### ุงุฑุณุงู ุนฺฉุณ ุจุง ฺฉูพุดู
```
1. ุงุฏูู: /start
2. ุงูุชุฎุงุจ: ๐ข ุงุฑุณุงู ูพุงู ููฺฏุงู
3. ุงูุชุฎุงุจ: ๐ท ุงุฑุณุงู ุนฺฉุณ
4. ุงุฑุณุงู: [ุนฺฉุณ]
5. ฺฉูพุดู: "ุชุตูุฑ ุฌุฏุฏ ูุญุตูู"
6. ุชุฃุฏ: โ ุชุฃุฏ ู ุงุฑุณุงู
```

## ๐ก๏ธ ุงููุช ู ูุญุฏูุฏุชโูุง

- ููุท ุงุฏููโูุง ุชุฃุฏ ุดุฏู ูโุชูุงููุฏ ุงุฒ ุณุณุชู ุงุณุชูุงุฏู ฺฉููุฏ
- ุชุฃุฏ ุงุฌุจุงุฑ ูุจู ุงุฒ ุงุฑุณุงู
- ูุญุฏูุฏุช ุชุนุฏุงุฏ ุงุฑุณุงู ููุฒูุงู
- ุซุจุช ฺฉุงูู ุนููุงุช ุจุฑุง audit

## ๐ ูุงูุชูุฑูฺฏ

- ุขูุงุฑ ุงุฑุณุงู ูููู ู ูุงูููู
- ุชุงุฑุฎฺู ฺฉุงูู ูพุงูโูุง
- ุฑุฏุงุจ ูุถุนุช ูุฑ ฺฉุงุฑุจุฑ
- ฺฏุฒุงุฑุดโฺฏุฑ ุงุฒ ุนููฺฉุฑุฏ ุณุณุชู
